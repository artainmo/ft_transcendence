{"ast":null,"code":"/* eslint-disable */\n//import \"../utils/constants\"\nimport { CENTER_WIDTH, GAME_HEIGHT, GAME_WIDTH, PLAYER_HEIGHT, PLAYER_WIDTH, START_POSITION_P1, CENTER_HEIGTH } from \"./infos\";\nimport Ball from \"./Ball\";\nimport Player from \"./Player\";\n\nclass Background {\n  constructor() {// this.w = w;\n    // this.h = h;\n    // this.can = document.getElementById(canId)  as HTMLCanvasElement;\n    // this.ctx = this.can.getContext('2d') as CanvasRenderingContext2D;\n    // this.can.addEventListener(\"mousemove\", this.movePaddle.bind(this));\n\n    let w = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : GAME_WIDTH;\n    let h = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : GAME_HEIGHT;\n    let canId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"PongCanvas\";\n    this.w = 0;\n    this.h = 0;\n    this.can = {};\n    this.ctx = {};\n    this.p1 = new Player(START_POSITION_P1);\n    this.p2 = new Player(GAME_WIDTH - PLAYER_WIDTH);\n    this.b = new Ball();\n    this.scoreP1 = 0;\n    this.scoreP2 = 0;\n    this.nameP1 = \"Player 1 : \";\n    this.nameP2 = \"Player 2 : \";\n  } // public addListener()\n  // {\n  // \tthis.can.addEventListener(\"mousemove\", this.movePaddle.bind(this));\n  // }\n\n\n  resetGame() {\n    let w = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : GAME_WIDTH;\n    let h = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : GAME_HEIGHT;\n    let canId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"PongCanvas\";\n    this.w = w;\n    this.h = h;\n    this.can = document.getElementById(canId);\n    this.ctx = this.can.getContext('2d');\n    this.can.addEventListener(\"mousemove\", this.movePaddle.bind(this));\n    this.p1 = new Player(START_POSITION_P1);\n    this.p2 = new Player(GAME_WIDTH - PLAYER_WIDTH);\n    this.b = new Ball();\n    this.scoreP1 = 0;\n    this.scoreP2 = 0;\n    this.nameP1 = \"Player 1 : \";\n    this.nameP2 = \"Player 2 : \";\n  }\n\n  movePaddle(evt) {\n    // var rectTop = {top: 0};\n    var rect = this.can.getBoundingClientRect(); // || rectTop;\n\n    this.p1.y = evt.clientY - rect.top - PLAYER_HEIGHT / 2;\n  }\n\n  fillRect() {\n    let color = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"black\";\n    let x = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    let y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    let w = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this.w;\n    let h = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.h;\n    this.ctx.fillStyle = color;\n    this.ctx.fillRect(x, y, w, h);\n  }\n\n  fillCircle() {\n    let color = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"white\";\n    let x = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : GAME_WIDTH / 2;\n    let y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : GAME_HEIGHT / 2;\n    let r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this.b.getRadius();\n    this.ctx.fillStyle = color;\n    this.ctx.beginPath();\n    this.ctx.arc(x, y, r, 0, Math.PI * 2, false);\n    this.ctx.closePath();\n    this.ctx.fill();\n  }\n\n  fillWrite(text, x, y) {\n    let color = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"white\";\n    let font = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : \"15px fantasy\";\n    this.ctx.fillStyle = color;\n    this.ctx.font = font;\n    this.ctx.fillText(text, x, y);\n  }\n\n  destroyGame() {\n    this.ctx.clearRect(0, 0, this.can.width, this.can.height);\n  }\n\n  drawGame() {\n    var height = 0;\n    this.destroyGame();\n    this.fillRect();\n    this.fillRect(\"white\", this.p1.x, this.p1.y, PLAYER_WIDTH, PLAYER_HEIGHT);\n    this.fillRect(\"white\", this.p2.x, this.p2.y, PLAYER_WIDTH, PLAYER_HEIGHT);\n    this.fillWrite(this.nameP1 + this.scoreP1, GAME_WIDTH / 2 - 70, 15);\n    this.fillWrite(this.nameP2 + this.scoreP2, GAME_WIDTH / 2 + 15, 15);\n\n    while (height < GAME_HEIGHT) {\n      this.fillRect(\"white\", GAME_WIDTH / 2 - CENTER_WIDTH / 2, height, CENTER_WIDTH, CENTER_HEIGTH);\n      height += CENTER_HEIGTH * 2;\n    }\n\n    this.fillCircle(\"white\", this.b.getX(), this.b.getY(), this.b.getRadius());\n  }\n\n  update() {\n    this.b.update(this.h, this.p1, this.p2);\n\n    if (this.b.getX() - this.b.getRadius() < 0) {\n      this.scoreP2 += 1;\n      this.b.resetBall();\n    } else if (this.b.getX() + this.b.getRadius() > GAME_WIDTH) {\n      this.scoreP1 += 1;\n      this.b.resetBall();\n    }\n  }\n\n}\n\nexport default Background;","map":{"version":3,"sources":["/Users/arthurtainmont/Documents/programming/ft_transcendence/frontend/src/pages/game/game/Background.ts"],"names":["CENTER_WIDTH","GAME_HEIGHT","GAME_WIDTH","PLAYER_HEIGHT","PLAYER_WIDTH","START_POSITION_P1","CENTER_HEIGTH","Ball","Player","Background","constructor","w","h","canId","can","ctx","p1","p2","b","scoreP1","scoreP2","nameP1","nameP2","resetGame","document","getElementById","getContext","addEventListener","movePaddle","bind","evt","rect","getBoundingClientRect","y","clientY","top","fillRect","color","x","fillStyle","fillCircle","r","getRadius","beginPath","arc","Math","PI","closePath","fill","fillWrite","text","font","fillText","destroyGame","clearRect","width","height","drawGame","getX","getY","update","resetBall"],"mappings":"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","sourcesContent":["/* eslint-disable */\n\n//import \"../utils/constants\"\nimport {CENTER_WIDTH, GAME_HEIGHT, GAME_WIDTH, PLAYER_HEIGHT, PLAYER_WIDTH, START_POSITION_P1, START_POSITION_P2, CENTER_HEIGTH} from \"./infos\";\nimport Ball from \"./Ball\";\nimport Player from \"./Player\";\n\nclass Background \n{\n\t\tprivate w: number = 0;\n\t\tprivate h: number = 0;\n\t\tprivate can: HTMLCanvasElement = {} as HTMLCanvasElement;\n\t\tprivate ctx: CanvasRenderingContext2D = {} as CanvasRenderingContext2D;\n\t\tprivate p1: Player = new Player(START_POSITION_P1);\n\t\tprivate p2: Player = new Player(GAME_WIDTH - PLAYER_WIDTH);\n\t\tprivate b: Ball = new Ball();\n\t\tprivate scoreP1: number = 0;\n\t\tprivate scoreP2: number = 0;\n\t\tprivate nameP1: string = \"Player 1 : \"; \n\t\tprivate nameP2: string = \"Player 2 : \";\n\n\t\tconstructor(w: number = GAME_WIDTH, h: number = GAME_HEIGHT, canId: string = \"PongCanvas\")\n\t\t{\n\t\t\t// this.w = w;\n\t\t\t// this.h = h;\n\t\t\t// this.can = document.getElementById(canId)  as HTMLCanvasElement;\n\t\t\t// this.ctx = this.can.getContext('2d') as CanvasRenderingContext2D;\n\t\t\t// this.can.addEventListener(\"mousemove\", this.movePaddle.bind(this));\n\t\t}\n\n\t\t// public addListener()\n\t\t// {\n\t\t// \tthis.can.addEventListener(\"mousemove\", this.movePaddle.bind(this));\n\t\t// }\n\n\t\tpublic resetGame(w: number = GAME_WIDTH, h: number = GAME_HEIGHT, canId: string = \"PongCanvas\")\n\t\t{\n\t\t\tthis.w = w;\n\t\t\tthis.h = h;\n\t\t\tthis.can = document.getElementById(canId)  as HTMLCanvasElement;\n\t\t\tthis.ctx = this.can.getContext('2d') as CanvasRenderingContext2D;\n\t\t\tthis.can.addEventListener(\"mousemove\", this.movePaddle.bind(this));\n\t\t\tthis.p1 = new Player(START_POSITION_P1);\n\t\t\tthis. p2 = new Player(GAME_WIDTH - PLAYER_WIDTH);\n\t\t\tthis.b = new Ball();\n\t\t\tthis.scoreP1 = 0;\n\t\t\tthis.scoreP2 = 0;\n\t\t\tthis.nameP1 = \"Player 1 : \"; \n\t\t\tthis.nameP2 = \"Player 2 : \";\n\t\t}\n\n\t\tpublic movePaddle(evt: MouseEvent)\n\t\t{\n\t\t\t// var rectTop = {top: 0};\n\t\t\tvar rect = this.can.getBoundingClientRect();// || rectTop;\n\t\t\tthis.p1.y = evt.clientY - rect.top - (PLAYER_HEIGHT / 2);\n\t\t}\n\n\t\tpublic fillRect(color: string = \"black\", x: number = 0, y: number = 0, w: number = this.w, h:number = this.h)\n\t\t{\n\t\t\tthis.ctx.fillStyle = color;\n\t\t\tthis.ctx.fillRect(x, y, w, h);\n\t\t}\n\n\t\tpublic fillCircle (color: string = \"white\", x: number = GAME_WIDTH / 2, y: number = GAME_HEIGHT / 2, r: number = this.b.getRadius())\n\t\t{\n\t\t\tthis.ctx.fillStyle = color;\n\t\t\tthis.ctx.beginPath();\n\t\t\tthis.ctx.arc(x, y, r, 0, Math.PI*2, false);\n\t\t\tthis.ctx.closePath();\n\t\t\tthis.ctx.fill();\n\t\t}\n\n\t\tpublic fillWrite (text: string, x: number, y: number, color: string = \"white\", font: string = \"15px fantasy\")\n\t\t{\n\t\t\tthis.ctx.fillStyle = color;\n\t\t\tthis.ctx.font = font;\n\t\t\tthis.ctx.fillText(text, x, y);\n\t\t}\n\t\n\t\tpublic destroyGame()\n\t\t{\n\t\t\tthis.ctx.clearRect(0, 0, this.can.width, this.can.height);\n\t\t}\n\n\t\tpublic drawGame()\n\t\t{\n\t\t\tvar height = 0;\n\t\t\n\t\t\tthis.destroyGame();\n\t\t\tthis.fillRect();\n\t\t\tthis.fillRect(\"white\", this.p1.x, this.p1.y, PLAYER_WIDTH, PLAYER_HEIGHT);\n\t\t\tthis.fillRect(\"white\", this.p2.x, this.p2.y, PLAYER_WIDTH, PLAYER_HEIGHT);\n\t\t\tthis.fillWrite(this.nameP1 + this.scoreP1, (GAME_WIDTH / 2) - 70 , 15);\n\t\t\tthis.fillWrite(this.nameP2 + this.scoreP2, (GAME_WIDTH / 2) + 15 , 15);\n\t\t\t\n\t\t\twhile (height < GAME_HEIGHT)\n\t\t\t{\n\t\t\t\tthis.fillRect(\"white\", (GAME_WIDTH / 2) - (CENTER_WIDTH / 2), height, CENTER_WIDTH, CENTER_HEIGTH);\n\t\t\t\theight += CENTER_HEIGTH * 2;\n\t\t\t}\n\t\t\tthis.fillCircle(\"white\", this.b.getX(), this.b.getY(), this.b.getRadius());\n\t\t}\n\n\t\tpublic update()\n\t\t{\n\t\t\tthis.b.update(this.h, this.p1, this.p2);\n\n\t\t\tif (this.b.getX() - this.b.getRadius() < 0)\n\t\t\t{\n\t\t\t\tthis.scoreP2 += 1;\n\t\t\t\tthis.b.resetBall();\n\t\t\t}\n\t\t\telse if (this.b.getX() + this.b.getRadius() > GAME_WIDTH)\n\t\t\t{\n\t\t\t\tthis.scoreP1 += 1;\n\t\t\t\tthis.b.resetBall();\n\t\t\t}\n\t\t}\n\n}\n\nexport default Background;"]},"metadata":{},"sourceType":"module"}